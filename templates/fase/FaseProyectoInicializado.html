{% extends 'base.html' %}
{% load static %}

{% block content %}
    <form action="/proyecto/proyectoVer/proyectoid={{ proyecto.id }}/">
        <button type="submit" class="waves-effect waves-teal btn-flat">
            Volver a la vista general del proyecto
            <i class="material-icons dark blue-text left">keyboard_return</i>
        </button>
    </form>

    <div class="container">
        <h5 style="text-align: left" >
            Fase: {{ fase.nombre }}
        </h5>
        <form action="/fase/FaseIniciada/config/">
            <button type="submit" class="btn btn-small blue darken-3 right">
                Configuración de Fase
                <i class="material-icons white-text left">settings</i>
            </button><br>
            <input  type="hidden" value={{proyecto.id}} id="proyectoid" name="proyectoid">
            <input  type="hidden" value={{fase.id}} id="faseid" name="faseid">
        </form>

    </div>
    <div class="container">
         <br><h5>Lísta de Ítems</h5>
        {% if tipos %}
            <form action="/item/itemCrear/">
                <button type="submit" class="btn btn-small blue darken-3 right">
                    Crear nuevo ítem
                    <i class="material-icons white-text left">add_circle</i>
                </button>
                <input  type="hidden" value={{proyecto.id}} id="proyectoid" name="proyectoid">
                <input  type="hidden" value={{fase.id}} id="faseid" name="faseid">
            </form>
        {% else %}
            <button
                title="La fase no cuenta con Tipos de ítems. Ve a la Configuración de Fase para agregarlos y poder crear ítems."
                style="cursor: default"
                class="btn btn-small #eeeeee grey lighten-3 black-text right"
            >
                Crear nuevo ítem
                <i class="material-icons white-text left">add_circle</i>
            </button><br>
        {% endif %}
    </div><br>
    <div class="container">
        <section class="section section-expenses">
            <ul class="z-depth-1">
                {% if items %}

                {% for i in items %}
                    <li>
                        <div class="card-panel z-depth-4 expense">
                            <div class="row">
                                <div class="col l4 left">
                                    <b>{{ i.nombre }}</b>
                                </div>
                                <div class="col l4 right">
                                    <a href="{%url 'itemConfigurar' i.id fase.id proyecto.id%}"
                                       title="Ver y/o modificar datos del ítem, relacionar, reversionar."
                                    >
                                        Gestionar Ítem
                                        <i class="material-icons dark blue-text left">settings</i>
                                    </a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col 1">
                                    <b>Estado:</b>
                                    {{ i.estado}}
                                </div>
                                <div class="col l4 left">
                                    <b>Costo en horas:</b>
                                    {{ i.costo }}h
                                </div>
                                <div class="col 3">
                                    <b>Tipo de ítem:</b>
                                    {{ i.tipoItem.nombreTipo}}
                                </div>
                            </div>
                        </div>
                    </li>
                {% endfor %}
                {% else%}
                    Aun no hay items
                {% endif %}
            </ul>
        </section>
    </div>

{% endblock%}