{% extends 'base.html' %}
{% load static %}

{% block content %}
    <form action="/proyecto/proyectoVer/proyectoid={{ proyectoid }}" xmlns="http://www.w3.org/1999/html">
            <button type="submit" class="waves-effect waves-teal btn-flat">
                    Volver a Gesti√≥n de Fases del Proyecto
                    <i class="material-icons dark blue-text left">keyboard_return</i>
            </button>
    </form>
	<div class="container">
        <section>
            <form action="/item/modify/" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input  type="hidden" value={{faseid}} id="faseid" name="faseid">
                <input  type="hidden" value={{proyectoid}} id="proyectoid" name="proyectoid">
                <input  type="hidden" value={{item.id}} id="itemid" name="itemid">
                <p><div>
                    <label for="nombre">Nombre del Item:</label>
                    <input type="text" id="nombre" name="nombre" value={{item.nombre}} required>
                </div></p>
                <p><div>
                    <label for="fecha">Fecha:</label>
                    <input type="date" id="fecha" name="fecha" value={{item.fecha}} required>
                </div></p>
                <p><div>
                    <label for="observacion">Observacion:</label>
                    <input type="text" id="observacion" name="observacion" value={{item.observacion}} required>
                </div></p>
                <p><div>
                    <label for="costo">Costo:</label>
                    <input type="text" id="costo" name="costo" value={{item.costo}} required>
                </div></p>
                 <div id="file"></div>
                <p><div>
                   <label for="archivo">Archivos:</label>
                    <input type="button" name="add_file" id="add_file" value="Agregar archivo">
                 </div></p>

                    {%for c, c2 in campos%}
                        <p><div>
                            <label for="campoextra">{{c}}:</label>
                            <input type="text" id="campoextra" name="{{c}}" value={{c2}} required>
                        </div></p>
                    {%endfor%}
                <button type="submit" class="btn-small blue darken-3 right" value="Save Data">
                    Guardar modificaciones
                    <i class="material-icons white-text left">edit</i>
                </button>

            </form>
        </section>
    </div>
<script>

        document.getElementById("add_file").onclick=function (ev) {

        var file=document.getElementById("file");
        var newInput=document.createElement("input");
        newInput.type="file";
        newInput.name="file[]";


        var br=document.createElement("br");
        var br1=document.createElement("br");

        newInput.onchange=function (ev1) {
            if(this.files && this.files[0]){
                var fileReader=new FileReader();

              //  fileReader.onload=function (ev2) {
                   // preview.src=ev2.target.result;
               // };

                fileReader.readAsDataURL(this.files[0])
            }
        };


        file.appendChild(newInput);
        file.appendChild(br);
        file.appendChild(br1);

    }

</script>

{% endblock%}
