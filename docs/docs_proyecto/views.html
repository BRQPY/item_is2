<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <title>views.py</title>
  <link rel="stylesheet" href="pycco.css">
</head>
<body>
<div id='container'>
  <div id="background"></div>
  <div class='section'>
    <div class='docs'><h1>views.py</h1></div>
  </div>
  <div class='clearall'>
  <div class='section' id='section-0'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-0'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span><span class="p">,</span> <span class="n">redirect</span>
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Proyecto</span><span class="p">,</span> <span class="n">Fase</span><span class="p">,</span> <span class="n">Rol</span><span class="p">,</span> <span class="n">FaseUser</span><span class="p">,</span> <span class="n">TipodeItem</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span><span class="p">,</span> <span class="n">Group</span><span class="p">,</span> <span class="n">Permission</span>
<span class="kn">from</span> <span class="nn">guardian.shortcuts</span> <span class="kn">import</span> <span class="n">assign_perm</span><span class="p">,</span> <span class="n">remove_perm</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth.decorators</span> <span class="kn">import</span> <span class="n">permission_required</span>
<span class="kn">from</span> <span class="nn">django.contrib.postgres.fields</span> <span class="kn">import</span> <span class="n">ArrayField</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-1'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-1'>#</a>
      </div>
      <p><strong>proyectoCrear:</strong>
    Vista utilizada para crear proyectos.
    Solicita que el usuario que realiza el
    request cuente con el permiso para crear
    proyectos y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="nd">@permission_required</span><span class="p">(</span><span class="s1">&#39;proyecto.add_proyecto&#39;</span><span class="p">,</span> <span class="n">login_url</span><span class="o">=</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">proyectoCrear</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-2'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-2'>#</a>
      </div>
      <p>POST request, captura los datos ingresados por el usuario para crear el proyecto.
Nombre del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-3'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-3'>#</a>
      </div>
      <p>Descripcion del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">nombre</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-4'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-4'>#</a>
      </div>
      <p>Fecha de Inicio del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">descripcion</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;descripcion&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-5'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-5'>#</a>
      </div>
      <p>Fecha de finalizacion del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">fechaini</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fechaini&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-6'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-6'>#</a>
      </div>
      <p>Id Gerente del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">fechafin</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fechafin&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-7'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-7'>#</a>
      </div>
      <p>Gerente del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">gerente</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;gerente&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-8'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-8'>#</a>
      </div>
      <p>Creador del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">gerente</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">gerente</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-9'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-9'>#</a>
      </div>
      <p>Creacion del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">creador</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-10'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-10'>#</a>
      </div>
      <p>Asignar el creador</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span><span class="p">,</span> <span class="n">descripcion</span><span class="o">=</span><span class="n">descripcion</span><span class="p">,</span> <span class="n">fecha_inicio</span><span class="o">=</span><span class="n">fechaini</span><span class="p">,</span> <span class="n">fecha_fin</span><span class="o">=</span><span class="n">fechafin</span><span class="p">,</span> <span class="n">gerente</span><span class="o">=</span><span class="n">gerente</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-11'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-11'>#</a>
      </div>
      <p>Agregar creador a lista de usuarios</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">creador</span><span class="o">=</span><span class="n">creador</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-12'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-12'>#</a>
      </div>
      <p>Agregar permisos de gerente y permiso para Ver Proyecto al gerente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">creador</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-13'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-13'>#</a>
      </div>
      <p>Agregar gerente a lista de usuarios</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">gerente</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span>
        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">&quot;view_proyecto&quot;</span><span class="p">,</span> <span class="n">gerente</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-14'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-14'>#</a>
      </div>
      <p>Estado de proyecto creado: pendiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">gerente</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-15'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-15'>#</a>
      </div>
      <p>Guardar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">estado</span><span class="o">=</span><span class="s2">&quot;pendiente&quot;</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-16'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-16'>#</a>
      </div>
      <p>Vista a redirigir: homeView</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-17'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-17'>#</a>
      </div>
      <p>GET request, envia lista de usuarios para elegir el gerente y muestra el template para la creacion de proyecto.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s2">&quot;/home/&quot;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-18'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-18'>#</a>
      </div>
      <p>Template a renderizar: proyectoCrear.html</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">usuarios</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-19'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-19'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoCrear.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-20'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-20'>#</a>
      </div>
      <p><strong>proyectoView:</strong>
    Vista utilizada para visualizar proyectos.
    Solicita que el usuario que realiza el request
    cuente con el permiso para ver el proyecto
    correspondiente,recibiendo el id del mismo y que
    (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoView</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-21'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-21'>#</a>
      </div>
      <p>Proyecto a visualizar
Solicitar permiso asociado al proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-22'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-22'>#</a>
      </div>
      <p>Fases del proyecto para enviar al template que muestra la informacion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;view_proyecto&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-23'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-23'>#</a>
      </div>
      <p>Template a renderizar: proyecto.html con parametros -&gt; proyectoid y fases del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fases</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">fases</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-24'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-24'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyecto&#39;</span><span class="p">:</span> <span class="n">proyecto</span><span class="p">,</span> <span class="s1">&#39;fases&#39;</span><span class="p">:</span><span class="n">fases</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-25'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-25'>#</a>
      </div>
      <p><strong>gestionProyecto:</strong>
    Vista utilizada para visualizar Gestion del Proyecto.
    Solicita que el usuario que realiza el request cuente
    con el permiso para ver el proyecto correspondiente
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">gestionProyecto</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-26'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-26'>#</a>
      </div>
      <p>ID del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-27'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-27'>#</a>
      </div>
      <p>Proyecto para el acceso a Gestion de Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-28'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-28'>#</a>
      </div>
      <p>Solicitar permiso asociado al proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-29'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-29'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;view_proyecto&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-30'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-30'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-31'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-31'>#</a>
      </div>
      <p><strong>proyectoModificar:</strong>
    Vista utilizada para visualizar Modificar Proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoModificar</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-32'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-32'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para modificar el proyecto
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-33'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-33'>#</a>
      </div>
      <p>Proyecto a modificar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-34'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-34'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-35'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-35'>#</a>
      </div>
      <p>Template a renderizar: proyectoModificar con parametro -&gt; proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-36'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-36'>#</a>
      </div>
      <p>POST request, captura la informacion para actualizar los datos del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoModificar.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyecto&#39;</span><span class="p">:</span> <span class="n">proyecto</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-37'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-37'>#</a>
      </div>
      <p>Nuevo nombre del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-38'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-38'>#</a>
      </div>
      <p>Nueva descripcion del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">nombre</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-39'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-39'>#</a>
      </div>
      <p>Nueva fecha de inicio del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">descripcion</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;descripcion&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-40'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-40'>#</a>
      </div>
      <p>Nueva fecha de finalizacion del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fechaini</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fechaini&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-41'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-41'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fechafin</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fechafin&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-42'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-42'>#</a>
      </div>
      <p>Proyecto a modificar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-43'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-43'>#</a>
      </div>
      <p>Actualizar informacion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-44'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-44'>#</a>
      </div>
      <p>Guardar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span>
    <span class="n">proyecto</span><span class="o">.</span><span class="n">descripcion</span> <span class="o">=</span> <span class="n">descripcion</span>
    <span class="n">proyecto</span><span class="o">.</span><span class="n">fecha_inicio</span> <span class="o">=</span> <span class="n">fechaini</span>
    <span class="n">proyecto</span><span class="o">.</span><span class="n">fecha_fin</span> <span class="o">=</span> <span class="n">fechafin</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-45'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-45'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-46'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-46'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-47'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-47'>#</a>
      </div>
      <p><strong>proyectoDeshabilitar:</strong>
    Vista utilizada para visualizar Deshabilitar Proyecto.
    Solicita que el usuario que realiza el request cuente
    con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoDeshabilitar</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-48'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-48'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para deshabilitar el proyecto
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-49'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-49'>#</a>
      </div>
      <p>Proyecto a deshabilitar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-50'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-50'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-51'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-51'>#</a>
      </div>
      <p>Template a renderizar: proyectoDeshabilitar.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-52'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-52'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoDeshabilitar.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-53'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-53'>#</a>
      </div>
      <p>Confirmar accion -&gt; si</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-54'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-54'>#</a>
      </div>
      <p>Proyecto a deshabilitar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pregunta&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;si&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-55'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-55'>#</a>
      </div>
      <p>Deshabilitar proyecto, cambio de estado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-56'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-56'>#</a>
      </div>
      <p>Template a renderizar: home.html</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">estado</span> <span class="o">=</span> <span class="s2">&quot;deshabilitado&quot;</span>
        <span class="n">proyecto</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-57'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-57'>#</a>
      </div>
      <p>Confirmar accion -&gt; no</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;home.html&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-58'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-58'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-59'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-59'>#</a>
      </div>
      <p><strong>faseView:</strong>
    Vista utilizada solo para demostracion.
    Permite acceder a la fase si el usuario
    fue asignado con un rol correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">faseView</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">faseid</span><span class="p">,</span> <span class="n">proyectoid</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-60'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-60'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fase</span> <span class="o">=</span> <span class="n">Fase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">faseid</span><span class="p">)</span>
    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;view_fase&quot;</span><span class="p">,</span> <span class="n">fase</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;fase/fase.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fase&#39;</span><span class="p">:</span> <span class="n">fase</span><span class="p">,</span> <span class="s1">&#39;proyecto&#39;</span><span class="p">:</span> <span class="n">proyecto</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-61'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-61'>#</a>
      </div>
      <p><strong>proyectoUser:</strong>
    Vista utilizada para mostrar Gestion de Miembros
    dentro del proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoUser</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-62'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-62'>#</a>
      </div>
      <p>ID del Proyecto
Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-63'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-63'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-64'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-64'>#</a>
      </div>
      <p>Lista de miembros del proyecto para mostrar en el template.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-65'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-65'>#</a>
      </div>
      <p>Template a renderizar; proyectoUser.html con parametros -&gt; proyectoid y usuarios del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">usuarios</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-66'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-66'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoUser.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-67'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-67'>#</a>
      </div>
      <p><strong>proyectoUserAdd:</strong>
    Vista utilizada para agregar miembros al proyecto.
    Solicita que el usuario que realiza el request cuente
    con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoUserAdd</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-68'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-68'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para agregar miembros al proyecto
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-69'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-69'>#</a>
      </div>
      <p>Proyecto al cual agregar miembros</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-70'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-70'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-71'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-71'>#</a>
      </div>
      <p>Gerente del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-72'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-72'>#</a>
      </div>
      <p>Lista de usuarios posibles a ser agregados</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">gerente</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span><span class="o">.</span><span class="n">gerente</span>
        <span class="n">usuarios</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-73'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-73'>#</a>
      </div>
      <p>Filtrar que no se pueda agregar un usuario staff, 
gerente. Tampoco puede ser el usuario que realiza
el request ni los usuarios ya agregados al proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">users</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-74'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-74'>#</a>
      </div>
      <p>Template a renderizar: proyectoUserAdd.html con parametros
 -&gt; usuarios posibles para agregar y proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">u</span><span class="o">.</span><span class="n">is_staff</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">u</span> <span class="o">!=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span> <span class="ow">and</span> <span class="n">u</span> <span class="o">!=</span> <span class="n">gerente</span> <span class="ow">and</span> <span class="ow">not</span><span class="p">(</span><span class="n">u</span> <span class="ow">in</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()):</span>
                <span class="n">usuarios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-75'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-75'>#</a>
      </div>
      <p>POST request, captura una lista de usuarios a agregar al proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoUserAdd.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-76'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-76'>#</a>
      </div>
      <p>Lista de usuarios a agregar
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">users</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-77'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-77'>#</a>
      </div>
      <p>Proyecto en el cual agregar miembros</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-78'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-78'>#</a>
      </div>
      <p>Usuario a ser agregado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-79'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-79'>#</a>
      </div>
      <p>Agregar usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-80'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-80'>#</a>
      </div>
      <p>Agregar permiso para Verl el Proyecto al usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-81'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-81'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">&quot;view_proyecto&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-82'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-82'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-83'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-83'>#</a>
      </div>
      <p><strong>proyectoUserRemove:</strong>
    Vista utilizada para remover miembros del proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoUserRemove</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-84'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-84'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para remover miembros del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-85'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-85'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-86'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-86'>#</a>
      </div>
      <p>Proyecto al cual remover miembros</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-87'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-87'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-88'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-88'>#</a>
      </div>
      <p>Gerente del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span>

        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-89'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-89'>#</a>
      </div>
      <p>Lista de miembros del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">gerente</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span><span class="o">.</span><span class="n">gerente</span>
        <span class="n">usuarios</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-90'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-90'>#</a>
      </div>
      <p>Filtrar que no se pueda remover un usuario staff,
gerente. Tampoco puede ser el usuario que realiza
el request.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">u</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">u</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-91'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-91'>#</a>
      </div>
      <p>Template a renderizar: proyectoUserRemove.html con parametro-&gt;
 usuarios posibles para remover y proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">is_staff</span> <span class="o">==</span> <span class="kc">False</span> <span class="ow">and</span> <span class="n">user</span> <span class="o">!=</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span> <span class="ow">and</span> <span class="n">user</span> <span class="o">!=</span> <span class="n">gerente</span><span class="p">:</span>
                <span class="n">usuarios</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-92'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-92'>#</a>
      </div>
      <p>POST request, captura la lista de usuarios para remover del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoUserRemove.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-93'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-93'>#</a>
      </div>
      <p>Lista de usuarios a remover
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">users</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-94'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-94'>#</a>
      </div>
      <p>Proyecto del cual remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-95'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-95'>#</a>
      </div>
      <p>Usuario a remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-96'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-96'>#</a>
      </div>
      <p>Remover usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-97'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-97'>#</a>
      </div>
      <p>Remover permiso para ver el proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-98'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-98'>#</a>
      </div>
      <p>Si el usuario era miembro del Comite de Control de Cambio. removerlo.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">remove_perm</span><span class="p">(</span><span class="s2">&quot;view_proyecto&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-99'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-99'>#</a>
      </div>
      <p>Remover permiso para aprobar la rotura de linea base.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-100'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-100'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">remove_perm</span><span class="p">(</span><span class="s2">&quot;aprobar_rotura_lineaBase&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-101'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-101'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-102'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-102'>#</a>
      </div>
      <p><strong>proyectoComite:</strong>
    Vista utilizada para mostrar Gestion de Comite
    de Control de Cambios del Proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoComite</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-103'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-103'>#</a>
      </div>
      <p>ID del proyecto
Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-104'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-104'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-105'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-105'>#</a>
      </div>
      <p>Lista de miembros del comite para mostrar en el template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-106'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-106'>#</a>
      </div>
      <p>Template a renderizar: proyectoComite.html con parametros -&gt; proyectoid y comite de control de cambios</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">comite</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-107'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-107'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoComite.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;comite&#39;</span><span class="p">:</span> <span class="n">comite</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-108'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-108'>#</a>
      </div>
      <p><strong>proyectoComiteAdd:</strong>
    Vista utilizada para agregar miembros
    al Comite de Control de Cambios del Proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoComiteAdd</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-109'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-109'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para agregar miembros al comite.
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-110'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-110'>#</a>
      </div>
      <p>Proyecto al cual agregar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-111'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-111'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-112'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-112'>#</a>
      </div>
      <p>Lista de usuarios del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span>

        <span class="n">miembros</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-113'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-113'>#</a>
      </div>
      <p>Filtrar que no sean usuarios que ya pertenecen al comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">users</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-114'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-114'>#</a>
      </div>
      <p>Agregar usuarios al comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">u</span> <span class="ow">in</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">()):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-115'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-115'>#</a>
      </div>
      <p>Template a renderizar: proyectoComiteAdd.html con parametros -&gt; 
miembros posibles a agregar y proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">miembros</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-116'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-116'>#</a>
      </div>
      <p>POST request, captura lista de miembros para agregar al comite.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoComiteAdd.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;miembros&#39;</span><span class="p">:</span> <span class="n">miembros</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-117'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-117'>#</a>
      </div>
      <p>Lista de miembros a agregar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-118'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-118'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">users</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;miembros&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-119'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-119'>#</a>
      </div>
      <p>Proyecto al cual agregar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-120'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-120'>#</a>
      </div>
      <p>Verificar que los miembros del comite no pueden ser mas de 3</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-121'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-121'>#</a>
      </div>
      <p>Lista de usuarios del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">users</span><span class="p">)</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">())))</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
        <span class="n">miembros</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-122'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-122'>#</a>
      </div>
      <p>Filtrar que los usuarios no pertenezcan al comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">users</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-123'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-123'>#</a>
      </div>
      <p>Template a renderizar: proyectoComiteAdd.html con parametros -&gt;
miembros posibles a agregar, proyectoid
y mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">u</span> <span class="ow">in</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">()):</span>
                <span class="n">miembros</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-124'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-124'>#</a>
      </div>
      <p>Miembro a agregar al Comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoComiteAdd.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;miembros&#39;</span><span class="p">:</span> <span class="n">miembros</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span>
                                                                   <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;El Comite Solo puede contar con 3 miembros.&quot;</span><span class="p">})</span>

    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-125'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-125'>#</a>
      </div>
      <p>Agregar miembro al Comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-126'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-126'>#</a>
      </div>
      <p>Agregar el permiso para aprobar rotura de linea base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-127'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-127'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">assign_perm</span><span class="p">(</span><span class="s2">&quot;aprobar_rotura_lineaBase&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-128'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-128'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-129'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-129'>#</a>
      </div>
      <p><strong>proyectoComiteRemove:</strong>
    Vista utilizada para remover miembros
    del Comite de Control de Cambios del Proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoComiteRemove</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-130'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-130'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para remover miembros del comite.
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-131'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-131'>#</a>
      </div>
      <p>Proyecto en el cual remover miembros del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-132'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-132'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-133'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-133'>#</a>
      </div>
      <p>Lista de miembros del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-134'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-134'>#</a>
      </div>
      <p>Template a renderizar: proyectoComiteRemove.html con parametros -&gt;
 miembros del comite y proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">miembros</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-135'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-135'>#</a>
      </div>
      <p>POST request, captura una lista de miembros para remover del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoComiteRemove.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;miembros&#39;</span><span class="p">:</span> <span class="n">miembros</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-136'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-136'>#</a>
      </div>
      <p>Lista de miembros
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">users</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;miembros&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-137'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-137'>#</a>
      </div>
      <p>Proyecto del cual remover los miembros del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-138'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-138'>#</a>
      </div>
      <p>Usuario a remover del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">users</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-139'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-139'>#</a>
      </div>
      <p>Remover usuario del comite</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">u</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-140'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-140'>#</a>
      </div>
      <p>Remover permisos para aprobar rotura de linea base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">comite</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">user</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-141'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-141'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">remove_perm</span><span class="p">(</span><span class="s2">&quot;aprobar_rotura_lineaBase&quot;</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-142'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-142'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-143'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-143'>#</a>
      </div>
      <p><strong>proyectoRol:</strong>
    Vista utilizada para mostrar Gestion de Roles en el proyecto.
    Solicita que el usuario que realiza el request cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRol</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-144'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-144'>#</a>
      </div>
      <p>ID del proyecto
Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-145'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-145'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-146'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-146'>#</a>
      </div>
      <p>Lista de roles del proyecto para visualizar en el template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-147'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-147'>#</a>
      </div>
      <p>Template a renderizar: proyectoRol.html con parametros -&gt; peroyectoid
y roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-148'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-148'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoRol.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-149'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-149'>#</a>
      </div>
      <p><strong>proyectoRolCrear</strong>
    Vista utilizada para crear roles en el proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRolCrear</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-150'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-150'>#</a>
      </div>
      <p>POST request, captura la informacion estblecida por el usuario para crear el rol
ID proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;POST&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-151'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-151'>#</a>
      </div>
      <p>Nombre del Rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-152'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-152'>#</a>
      </div>
      <p>Verificar si ya existe un rol con el nombre especificado, este debe ser unico</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">nombre</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-153'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-153'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolCrear.html con parametros -&gt; mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="n">nombre</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-154'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-154'>#</a>
      </div>
      <p>Crear el rol con el nombre especificado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoRolCrear.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;mensaje&#39;</span><span class="p">:</span><span class="s2">&quot;Lo sentimos, el nombre del Rol ya ha sido asignado.&quot;</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-155'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-155'>#</a>
      </div>
      <p>Crear grupo de permisos con el nombre especificado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="n">nombre</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-156'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-156'>#</a>
      </div>
      <p>Lista de permisos de proyecto para el rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">grupo</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">nombre</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-157'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-157'>#</a>
      </div>
      <p>Permiso Proyecto ID=1 corresponde a Crear Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">permisos</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;perms&#39;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permisos</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-158'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-158'>#</a>
      </div>
      <p>Permiso Proyecto ID=2 corresponde a Modificar Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;add_fase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-159'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-159'>#</a>
      </div>
      <p>Permiso Proyecto ID=3 corresponde a Remover Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;change_fase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-160'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-160'>#</a>
      </div>
      <p>Permiso Proyecto ID=4 corresponde a Ver Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;delete_fase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-161'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-161'>#</a>
      </div>
      <p>Permiso Proyecto ID=5 corresponde a Crear Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;view_fase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-162'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-162'>#</a>
      </div>
      <p>Permiso Proyecto ID=6 corresponde a Aprobar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;create_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-163'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-163'>#</a>
      </div>
      <p>Permiso Proyecto ID=7 corresponde a Deshabilitar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;aprobar_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-164'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-164'>#</a>
      </div>
      <p>Permiso Proyecto ID=8 corresponde a Reversionar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;deshabilitar_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-165'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-165'>#</a>
      </div>
      <p>Permiso Proyecto ID=9 corresponde a Relacionar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;reversionar_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-166'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-166'>#</a>
      </div>
      <p>Permiso Proyecto ID=10 corresponde a Modificar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;relacionar_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-167'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-167'>#</a>
      </div>
      <p>Permiso Proyecto ID=11 corresponde a Establecer Item Pendiente de Aprobacion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;change_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-168'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-168'>#</a>
      </div>
      <p>Permiso Proyecto ID=12 corresponde a Establecer Item Desarrollo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;establecer_itemPendienteAprob&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-169'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-169'>#</a>
      </div>
      <p>Permiso Proyecto ID=13 corresponde a Obtener Trazabilidad de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;establecer_itemDesarrollo&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-170'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-170'>#</a>
      </div>
      <p>Permiso Proyecto ID=14 corresponde a Ver Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;obtener_trazabilidadItem&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-171'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-171'>#</a>
      </div>
      <p>Permiso Proyecto ID=15 corresponde a Obtener Calculo de Impacto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;view_item&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-172'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-172'>#</a>
      </div>
      <p>Permiso Proyecto ID=16 corresponde a Crear Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;obtener_calculoImpacto&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-173'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-173'>#</a>
      </div>
      <p>Permiso Proyecto ID=17 corresponde a Romper Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;create_lineaBase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-174'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-174'>#</a>
      </div>
      <p>Permiso Proyecto ID=18 corresponde a Solicitar Rotura de Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;romper_lineaBase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">18</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-175'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-175'>#</a>
      </div>
      <p>Establecer el grupo de permisos al rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;solicitar_roturaLineaBase&quot;</span><span class="p">)</span>
                <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-176'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-176'>#</a>
      </div>
      <p>Guardar ROl</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">rol</span><span class="o">.</span><span class="n">perms</span> <span class="o">=</span> <span class="n">grupo</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-177'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-177'>#</a>
      </div>
      <p>Proyecto al cual agregar rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">rol</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-178'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-178'>#</a>
      </div>
      <p>Agregar rol a proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-179'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-179'>#</a>
      </div>
      <p>Template a renderizar: gestion Proyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">rol</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-180'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-180'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para la creacion del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span>
    <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-181'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-181'>#</a>
      </div>
      <p>ID Proyecto
Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-182'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-182'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-183'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-183'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolCrear.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-184'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-184'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolCrear.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-185'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-185'>#</a>
      </div>
      <p><strong>proyectoRolModificar:</strong>
    Vista utilizada para modificar roles del proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRolModificar</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-186'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-186'>#</a>
      </div>
      <p>ID Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">seleccion</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">permisos</span> <span class="o">=</span> <span class="kc">None</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-187'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-187'>#</a>
      </div>
      <p>POST request, captura la nueva informacion para el rol para actualizarlo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-188'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-188'>#</a>
      </div>
      <p>Boton Modificar presionado en el template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-189'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-189'>#</a>
      </div>
      <p>ID del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="s1">&#39;changerol&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-190'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-190'>#</a>
      </div>
      <p>Permisos nuevos para el rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rolid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;rolid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-191'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-191'>#</a>
      </div>
      <p>Nuevo nombre del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">permisos</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;perms&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-192'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-192'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">nombre</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;nombre&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-193'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-193'>#</a>
      </div>
      <p>Verificar si el nombre asignado ya corresponde al nombre de otro rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-194'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-194'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="n">nombre</span><span class="p">)</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-195'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-195'>#</a>
      </div>
      <p>Roles del Proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-196'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-196'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolModificar.html con parametros -&gt; 
roles del proyecto, proyectoid y mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-197'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-197'>#</a>
      </div>
      <p>Rol a modificar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolModificar.html&quot;</span><span class="p">,</span>
                              <span class="p">{</span><span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;permisos&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;Lo sentimos, el nombre del Rol ya ha sido asignado.&quot;</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-198'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-198'>#</a>
      </div>
      <p>Grupo a poseer los nuevos permisos</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span>
            <span class="n">vector</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-199'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-199'>#</a>
      </div>
      <p>Asignar nuevo nombre al rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">grupo</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">rol</span><span class="o">.</span><span class="n">nombre</span><span class="p">)</span>
            <span class="n">grupo</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">nombre</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-200'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-200'>#</a>
      </div>
      <p>Permiso Proyecto ID=1 corresponde a Crear Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">nombre</span>

            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permisos</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-201'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-201'>#</a>
      </div>
      <p>Permiso Proyecto ID=2 corresponde a Modificar Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;add_fase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-202'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-202'>#</a>
      </div>
      <p>Permiso Proyecto ID=3 corresponde a Remover Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;change_fase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-203'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-203'>#</a>
      </div>
      <p>Permiso Proyecto ID=4 corresponde a Ver Fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;delete_fase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-204'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-204'>#</a>
      </div>
      <p>Permiso Proyecto ID=5 corresponde a Crear Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;view_fase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-205'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-205'>#</a>
      </div>
      <p>Permiso Proyecto ID=6 corresponde a Aprobar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;create_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-206'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-206'>#</a>
      </div>
      <p>Permiso Proyecto ID=7 corresponde a Deshabilitar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;aprobar_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-207'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-207'>#</a>
      </div>
      <p>Permiso Proyecto ID=8 corresponde a Reversionar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;deshabilitar_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-208'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-208'>#</a>
      </div>
      <p>Permiso Proyecto ID=9 corresponde a Relacionar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;reversionar_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-209'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-209'>#</a>
      </div>
      <p>Permiso Proyecto ID=10 corresponde a Modificar Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;relacionar_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-210'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-210'>#</a>
      </div>
      <p>Permiso Proyecto ID=11 corresponde a Establecer Item Pendiente de Aprobacion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;change_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-211'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-211'>#</a>
      </div>
      <p>Permiso Proyecto ID=12 corresponde a Establecer Item Desarrollo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;establecer_itemPendienteAprob&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-212'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-212'>#</a>
      </div>
      <p>Permiso Proyecto ID=13 corresponde a Obtener Trazabilidad de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;establecer_itemDesarrollo&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">13</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-213'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-213'>#</a>
      </div>
      <p>Permiso Proyecto ID=14 corresponde a Ver Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;obtener_trazabilidadItem&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">14</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-214'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-214'>#</a>
      </div>
      <p>Permiso Proyecto ID=15 corresponde a Obtener Calculo de Impacto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;view_item&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">15</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-215'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-215'>#</a>
      </div>
      <p>Permiso Proyecto ID=16 corresponde a Crear Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;obtener_calculoImpacto&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">16</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-216'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-216'>#</a>
      </div>
      <p>Permiso Proyecto ID=17 corresponde a Romper Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;create_lineaBase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">17</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-217'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-217'>#</a>
      </div>
      <p>Permiso Proyecto ID=18 corresponde a Solicitar Rotura de Linea Base</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;romper_lineaBase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">int</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">18</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-218'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-218'>#</a>
      </div>
      <p>Agregar permisos al grupo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">permiso</span> <span class="o">=</span> <span class="n">Permission</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">codename</span><span class="o">=</span><span class="s2">&quot;solicitar_roturaLineaBase&quot;</span><span class="p">)</span>
                    <span class="n">vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">permiso</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-219'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-219'>#</a>
      </div>
      <p>Guardar grupo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">vector</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-220'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-220'>#</a>
      </div>
      <p>Agregar grupo de permisos al rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">grupo</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-221'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-221'>#</a>
      </div>
      <p>Guardar Rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span><span class="o">.</span><span class="n">perms</span> <span class="o">=</span> <span class="n">grupo</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-222'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-222'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-223'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-223'>#</a>
      </div>
      <p>Boton MOdificar no ha sido presionado en el template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/gestionProyecto.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span>


        <span class="k">else</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-224'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-224'>#</a>
      </div>
      <p>ID Proyecto
ID del Rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-225'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-225'>#</a>
      </div>
      <p>Rol a MOdificar</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rolid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-226'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-226'>#</a>
      </div>
      <p>Verificar si el rol ha sido asignado previamente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-227'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-227'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">if</span> <span class="n">rol</span><span class="o">.</span><span class="n">faseUser</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-228'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-228'>#</a>
      </div>
      <p>Lista de roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-229'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-229'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolModificar.html con parametro -&gt; 
roles del proyecto, proyectoid y 
mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-230'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-230'>#</a>
      </div>
      <p>Si el rol no ha sido asignado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolModificar.html&quot;</span><span class="p">,</span>
                              <span class="p">{</span><span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;permisos&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                               <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;Lo sentimos, no es posible modificar un rol previamente asignado.&quot;</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-231'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-231'>#</a>
      </div>
      <p>Actualizar los datos para visualizar en el template
Permisos del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">seleccion</span> <span class="o">=</span> <span class="n">rol</span>
            <span class="n">permisos</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-232'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-232'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente a la modificacion de roles</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">perms</span> <span class="o">=</span> <span class="n">rol</span><span class="o">.</span><span class="n">perms</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">perms</span><span class="p">:</span>
                <span class="n">permisos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">codename</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-233'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-233'>#</a>
      </div>
      <p>Proyecto correspondiente
Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-234'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-234'>#</a>
      </div>
      <p>Roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-235'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-235'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolModificar.html con parametros -&gt; roles del proyecto, proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-236'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-236'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolModificar.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="n">seleccion</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;permisos&#39;</span><span class="p">:</span> <span class="n">permisos</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-237'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-237'>#</a>
      </div>
      <p><strong>proyectoRolEliminar:</strong>
    Vista utilizada para remover roles del proyecto.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRolEliminar</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-238'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-238'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para remover roles del proeycto
ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-239'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-239'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-240'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-240'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-241'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-241'>#</a>
      </div>
      <p>Lista de roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-242'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-242'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolEliminar.html con parametros -&gt; roles
del proyecto y proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-243'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-243'>#</a>
      </div>
      <p>POST request, captura el rol para remover del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolEliminar.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-244'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-244'>#</a>
      </div>
      <p>ID del proyecto
Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-245'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-245'>#</a>
      </div>
      <p>Lista de roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-246'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-246'>#</a>
      </div>
      <p>ID del rol a remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-247'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-247'>#</a>
      </div>
      <p>Rol a remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rolid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-248'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-248'>#</a>
      </div>
      <p>Verificar si el rol ha sido asignado previamente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-249'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-249'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolEliminar.html con parametros -&gt; roles
del proyecto, proyectoid
y mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">rol</span><span class="o">.</span><span class="n">faseUser</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-250'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-250'>#</a>
      </div>
      <p>Si el rol no ha sido asignado previamente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolEliminar.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span>
                                        <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;Lo sentimos, no puede remover un rol previamente asignado.&quot;</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-251'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-251'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">rol</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-252'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-252'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-253'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-253'>#</a>
      </div>
      <p><strong>proyectoRolAsignar:</strong>
    Vista utilizada para asignar roles del proyecto a usuarios.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRolAsignar</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-254'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-254'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para asignar roles del proyecto
Proyecto ID</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-255'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-255'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-256'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-256'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-257'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-257'>#</a>
      </div>
      <p>Lista de usuarios del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-258'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-258'>#</a>
      </div>
      <p>Lista de roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">usuarios</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-259'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-259'>#</a>
      </div>
      <p>Lista de fases del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-260'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-260'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolAsignar.html con parametros -&gt; roles
,usuarios y fases del proyecto,
 ademas de proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">fases</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">fases</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-261'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-261'>#</a>
      </div>
      <p>POST request, captura el usuario, el rol y las fases para asignar el mismo</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolAsignar.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fases&#39;</span><span class="p">:</span> <span class="n">fases</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-262'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-262'>#</a>
      </div>
      <p>ID User
ID rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">userid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-263'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-263'>#</a>
      </div>
      <p>ID fase</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rolid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-264'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-264'>#</a>
      </div>
      <p>ID proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fases</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;fases&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-265'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-265'>#</a>
      </div>
      <p>Usuario a ser asignado el rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-266'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-266'>#</a>
      </div>
      <p>Rol a ser asignado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">userid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-267'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-267'>#</a>
      </div>
      <p>Permisos del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-268'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-268'>#</a>
      </div>
      <p>Verificar si el usuario ya cuenta con el rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">grupo</span> <span class="o">=</span> <span class="n">rol</span><span class="o">.</span><span class="n">perms</span>
    <span class="n">permisos</span> <span class="o">=</span> <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">codenames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permisos</span><span class="p">:</span>
        <span class="n">codenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">codename</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fases</span><span class="p">:</span>
        <span class="n">fase</span> <span class="o">=</span> <span class="n">Fase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">f</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-269'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-269'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolAsignar.html con parametros -&gt; roles,
 usuario y fases del proyecto, ademas
 de proyecto id y mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="n">rol</span><span class="o">.</span><span class="n">faseUser</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">fase</span><span class="o">=</span><span class="n">fase</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
            <span class="n">usuarios</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">fases</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">fases</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-270'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-270'>#</a>
      </div>
      <p>Crear asociacion entre fase y usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolAsignar.html&quot;</span><span class="p">,</span>
                            <span class="p">{</span><span class="s1">&#39;fases&#39;</span><span class="p">:</span> <span class="n">fases</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span>
                            <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span>
                            <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;El usuario ya cuenta con el rol en alguna de las fases seleccionadas.&quot;</span><span class="p">,</span> <span class="p">})</span>


    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fases</span><span class="p">:</span>
        <span class="n">fase</span> <span class="o">=</span> <span class="n">Fase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">f</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-271'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-271'>#</a>
      </div>
      <p>Agregar asociacion al rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">faseUser</span> <span class="o">=</span> <span class="n">FaseUser</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">fase</span><span class="o">=</span><span class="n">fase</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">codenames</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-272'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-272'>#</a>
      </div>
      <p>Asignar los permisos del rol al grupo, en la fase correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">rol</span><span class="o">.</span><span class="n">faseUser</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">faseUser</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-273'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-273'>#</a>
      </div>
      <p>Asignar el grupo al usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">assign_perm</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">grupo</span><span class="p">,</span> <span class="n">fase</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-274'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-274'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">user</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">grupo</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-275'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-275'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-276'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-276'>#</a>
      </div>
      <p><strong> proyectoRolRemover:</strong>
    Vista utilizada para remover roles del proyecto de usuarios.
    Solicita que el usuario que realiza el request
    cuente con los permisos de gerente del proyecto
    y que (indirectamente) haya iniciado sesion</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoRolRemover</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-277'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-277'>#</a>
      </div>
      <p>GET request, muestra el template correspondiente para remover roles del proyecto
ID proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s1">&#39;GET&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-278'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-278'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-279'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-279'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-280'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-280'>#</a>
      </div>
      <p>Usuarios del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
            <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-281'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-281'>#</a>
      </div>
      <p>Roles del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">usuarios</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-282'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-282'>#</a>
      </div>
      <p>Fases del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-283'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-283'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolRemover.html con parametros roles,
fases y usuarios del proyecto, 
ademas de proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">fases</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">fases</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-284'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-284'>#</a>
      </div>
      <p>POST request, captura el usuario, el rol y las fases para remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolRemover.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;fases&#39;</span><span class="p">:</span> <span class="n">fases</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-285'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-285'>#</a>
      </div>
      <p>ID user
ID rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">userid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;users&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-286'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-286'>#</a>
      </div>
      <p>ID fases</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rolid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;roles&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-287'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-287'>#</a>
      </div>
      <p>ID proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">fases</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;fases&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-288'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-288'>#</a>
      </div>
      <p>Usuario al cual remover el rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-289'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-289'>#</a>
      </div>
      <p>Rol a remover</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">userid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-290'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-290'>#</a>
      </div>
      <p>Permisos del rol</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">rol</span> <span class="o">=</span> <span class="n">Rol</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">rolid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-291'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-291'>#</a>
      </div>
      <p>Verificar si el rol ha sido asignado previamente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">grupo</span> <span class="o">=</span> <span class="n">rol</span><span class="o">.</span><span class="n">perms</span>
    <span class="n">permisos</span> <span class="o">=</span> <span class="n">grupo</span><span class="o">.</span><span class="n">permissions</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">codenames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">permisos</span><span class="p">:</span>
        <span class="n">codenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">codename</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fases</span><span class="p">:</span>
        <span class="n">fase</span> <span class="o">=</span> <span class="n">Fase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">f</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-292'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-292'>#</a>
      </div>
      <p>Template a renderizar: proyectoRolRemover.html con parametros -&gt; fases,
roles y usuarios del proyecto,
ademas de proyectoid y mensaje de error</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="ow">not</span> <span class="n">rol</span><span class="o">.</span><span class="n">faseUser</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">fase</span><span class="o">=</span><span class="n">fase</span><span class="p">)</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
            <span class="n">usuarios</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">usuarios</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">roles</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">roles</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
            <span class="n">fases</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">fases</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-293'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-293'>#</a>
      </div>
      <p>Eliminar asociacion entre fase y usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/proyectoRolRemover.html&quot;</span><span class="p">,</span>
                          <span class="p">{</span><span class="s1">&#39;fases&#39;</span><span class="p">:</span> <span class="n">fases</span><span class="p">,</span> <span class="s1">&#39;usuarios&#39;</span><span class="p">:</span> <span class="n">usuarios</span><span class="p">,</span> <span class="s1">&#39;roles&#39;</span><span class="p">:</span> <span class="n">roles</span><span class="p">,</span>
                           <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span>
                           <span class="s1">&#39;mensaje&#39;</span><span class="p">:</span> <span class="s2">&quot;El usuario no cuenta con el rol en alguna de las fases seleccionadas.&quot;</span><span class="p">,</span> <span class="p">})</span>


    <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">fases</span><span class="p">:</span>
        <span class="n">fase</span> <span class="o">=</span> <span class="n">Fase</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">f</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-294'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-294'>#</a>
      </div>
      <p>Remover los permisos del rol, al grupo en la fase correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">FaseUser</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">fase</span><span class="o">=</span><span class="n">fase</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">codenames</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-295'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-295'>#</a>
      </div>
      <p>Agregar el grupo al usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">remove_perm</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">grupo</span><span class="p">,</span> <span class="n">fase</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-296'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-296'>#</a>
      </div>
      <p>Template a renderizar: gestionProyecto.html con parametro -&gt; proyectoid</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">user</span><span class="o">.</span><span class="n">groups</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">grupo</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-297'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-297'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-298'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-298'>#</a>
      </div>
      <p>ID del proyecto</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">proyectoTipodeItem</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-299'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-299'>#</a>
      </div>
      <p>Proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-300'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-300'>#</a>
      </div>
      <p>Verificar permiso necesario en el proyecto correspondiente</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-301'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-301'>#</a>
      </div>
      <p>Lista de miembros del comite para mostrar en el template</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">has_perm</span><span class="p">(</span><span class="s2">&quot;is_gerente&quot;</span><span class="p">,</span> <span class="n">proyecto</span><span class="p">)):</span>
        <span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s1">&#39;/permissionError/&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-302'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-302'>#</a>
      </div>
      <p>Template a renderizar: proyectoComite.html con parametros -&gt; proyectoid y tipos de item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipoItem</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-303'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-303'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s1">&#39;proyecto/proyectoTipodeItem.html&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;comite&#39;</span><span class="p">:</span> <span class="n">tipoItem</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-304'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-304'>#</a>
      </div>
      <p>Recibe el POST con los datos del formulario para la creacin de un Tipo de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">crear_tipo_form</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">==</span><span class="s2">&quot;POST&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-305'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-305'>#</a>
      </div>
      <p>Recupera de la BD el proyecto en el que se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">dato</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-306'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-306'>#</a>
      </div>
      <p>Se asignan variables con los valores del POST para poder crear el tipo de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-307'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-307'>#</a>
      </div>
      <p>Creacin de un objeto Tipo de Item con los valores recibidos en el post</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">nombre1</span><span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;nombretipo&#39;</span><span class="p">]</span>
        <span class="n">descrip</span> <span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;descripciontipo&#39;</span><span class="p">]</span>
        <span class="n">campo</span> <span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;Campos&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-308'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-308'>#</a>
      </div>
      <p>Ciclo para agregar los campos extra creados por el usuario al objeto del tipo &ldquo;Tipo de Item&rdquo;</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">obj</span> <span class="o">=</span> <span class="n">TipodeItem</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">nombre</span><span class="o">=</span><span class="n">nombre1</span><span class="p">,</span><span class="n">descripcion</span><span class="o">=</span><span class="n">descrip</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-309'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-309'>#</a>
      </div>
      <p>Se guarda en la BD el objeto creado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">campo</span><span class="p">:</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">campo_extra</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-310'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-310'>#</a>
      </div>
      <p>Se asigna el proyecto en el cual se encuentra proyectoidel usuario el nuevo tipo de Item creado</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-311'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-311'>#</a>
      </div>
      <p>En caso de recibir un mtodo GET, renderiza al html creartipo.html</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-312'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-312'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/creartipo.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-313'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-313'>#</a>
      </div>
      <p><strong> gestionar_tipo_de_item</strong>
    View para gestionar los tipos de Item,
    en ella se encuentran las opciones de
    Creacin, Modificacin y
    Eliminacin de Tipos de Items.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">gestionar_tipo_de_item</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-314'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-314'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
    <span class="n">tipos</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionartipodeitem.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;tipos&#39;</span><span class="p">:</span> <span class="n">tipos</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-315'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-315'>#</a>
      </div>
      <p><strong>modificar_tipo_de_item:</strong>
    View para modificar los datos de un tipo
    de Item previamente creado.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">modificar_tipo_de_item</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-316'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-316'>#</a>
      </div>
      <p>Se establece seleccion en None debido a que 
se encuentra en el metodo GET, el usuario an no
selecciono un tipo de Item para modificar.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-317'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-317'>#</a>
      </div>
      <p>Consulta si el post recibido es el de la seleccin de 
un Tipo de Item o el post para guardar la informacin modificada.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">seleccion</span><span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">==</span><span class="s2">&quot;POST&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-318'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-318'>#</a>
      </div>
      <p>Recibe el POST con los datos del formulario para la modificacin de un Tipo de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">if</span> <span class="s1">&#39;cambio&#39;</span> <span class="ow">in</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
            <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
            <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span>
            <span class="n">dato</span><span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-319'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-319'>#</a>
      </div>
      <p>Creacin de un objeto Tipo de Item con los valores recibidos en el post
Se guarda en el objeto Tipo de Item los valores de modificacin establecidos por el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">obj</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">dato</span><span class="p">[</span><span class="s1">&#39;tipodeitem_id&#39;</span><span class="p">])</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-320'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-320'>#</a>
      </div>
      <p>Se crea un vector para guardar los cambios en los campos extras</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">obj</span><span class="o">.</span><span class="n">nombre</span> <span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;nombretipo&#39;</span><span class="p">]</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">descripcion</span><span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;descripciontipo&#39;</span><span class="p">]</span>
            <span class="n">cambios</span><span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;campos&#39;</span><span class="p">)</span>
            <span class="n">campos_add</span><span class="o">=</span> <span class="n">dato</span><span class="p">[</span><span class="s1">&#39;camposadd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-321'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-321'>#</a>
      </div>
      <p>Agrega campos que no sean igual a un espacio en blanco,
pues estos fueron eliminados por el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">cambios_campos</span><span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cambios</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s1">&#39;&#39;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-322'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-322'>#</a>
      </div>
      <p>Guarda los campos extra filtrados, es decir, sin espacios en blanco.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                    <span class="n">cambios_campos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">cc</span> <span class="ow">in</span> <span class="n">campos_add</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-323'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-323'>#</a>
      </div>
      <p>Guarda las modificaciones en la BD</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>                <span class="n">cambios_campos</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
            <span class="n">obj</span><span class="o">.</span><span class="n">campo_extra</span><span class="o">=</span><span class="n">cambios_campos</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-324'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-324'>#</a>
      </div>
      <p>Se asigna a la variable &ldquo;tipos&rdquo; todos los Tipos de Item 
con los que cuenta el proyecto en el cual se encuentra el usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
            <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-325'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-325'>#</a>
      </div>
      <p>POST para la seleccion de un Tipo de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">tipos</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-326'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-326'>#</a>
      </div>
      <p>Guarda en la variable seleccion el tipo de Item seleccionado por el usuario.
Se recibe el ID del proyecto en el cual se encuentra actualmente el Usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">seleccion</span> <span class="o">=</span> <span class="n">TipodeItem</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">[</span><span class="s1">&#39;tipo&#39;</span><span class="p">])</span>
            <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/modifTipodeItem.html&quot;</span><span class="p">,</span>
                          <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;tipos&#39;</span><span class="p">:</span> <span class="n">tipos</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">:</span> <span class="n">seleccion</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-327'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-327'>#</a>
      </div>
      <p>Recupera de la BD el proyecto en el que se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-328'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-328'>#</a>
      </div>
      <p>Se asigna a la variable &ldquo;tipos&rdquo; todos los Tipos de Item
con los que cuenta el proyecto en el cual se encuentra el usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipos</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/modifTipodeItem.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="s1">&#39;tipos&#39;</span><span class="p">:</span><span class="n">tipos</span><span class="p">,</span> <span class="s1">&#39;select&#39;</span><span class="p">:</span><span class="n">seleccion</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-329'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-329'>#</a>
      </div>
      <p><strong>importar_tipo_de_item:</strong>
    View para la importacin de
    Tipos de Item al proyecto.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">importar_tipo_de_item</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-330'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-330'>#</a>
      </div>
      <p>Recibe los tipos de Item que el usuario desea importar al proyecto actual.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="o">==</span><span class="s2">&quot;POST&quot;</span><span class="p">:</span>
        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-331'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-331'>#</a>
      </div>
      <p>Ciclo para recorrer los tipos de Item seleccionados por el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">elegidos</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;importados&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-332'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-332'>#</a>
      </div>
      <p>Agrega al proyecto actual los tipos de Item seleccionados.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">tipos</span> <span class="o">=</span> <span class="n">TipodeItem</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elegidos</span><span class="p">:</span>
            <span class="n">tipo</span> <span class="o">=</span> <span class="n">tipos</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">e</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-333'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-333'>#</a>
      </div>
      <p>Se recibe el ID del proyecto en el cual se encuentra actualmente el Usuario</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tipo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-334'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-334'>#</a>
      </div>
      <p>Recupera de la BD el proyecto en el que se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-335'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-335'>#</a>
      </div>
      <p>Recupera de la BD todos los Tipos de Item con
los que cuenta el proyecto en el cual se encuentra el usuario.</p>
<p>Recupera de la BD todos los Tipos de Item creados.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipos_enel_Proyecto</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-336'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-336'>#</a>
      </div>
      <p>Se crea un vector para guardar los Tipos de Item 
existentes que no pertenezcan ya al proyecto actual.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipos</span> <span class="o">=</span> <span class="n">TipodeItem</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-337'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-337'>#</a>
      </div>
      <p>Ciclo que recorre todos los tipos de item en la BD.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipos_de_item</span> <span class="o">=</span> <span class="p">[]</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-338'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-338'>#</a>
      </div>
      <p>Agrega al vector solo si el Tipo de Item no coincide con alguno perteneciente al proyecto.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tipos</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">():</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-339'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-339'>#</a>
      </div>
      <p>Renderiza la pagina cargandola con los Tipos de Item disponibles para importar.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">tipos_de_item</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-340'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-340'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span><span class="s2">&quot;proyecto/importartipo.html&quot;</span><span class="p">,{</span><span class="s1">&#39;tipos&#39;</span><span class="p">:</span><span class="n">tipos_de_item</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-341'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-341'>#</a>
      </div>
      <p><strong>remover_tipo_de_item:</strong>
    View para remover un tipo de Item</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre><span class="k">def</span> <span class="nf">remover_tipo_de_item</span><span class="p">(</span><span class="n">request</span><span class="p">):</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-342'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-342'>#</a>
      </div>
      <p>Se recibe el ID del proyecto en el cual se encuentra actualmente el Usuario
Recupera de la BD el proyecto en el que se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-343'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-343'>#</a>
      </div>
      <p>Recupera de la BD todos los Tipos de Item con los que 
cuenta el proyecto en el cual se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
        <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-344'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-344'>#</a>
      </div>
      <p>Recibe los tipos de Item que el usuario desea remover del proyecto actual.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">tipos_enel_proyecto</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-345'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-345'>#</a>
      </div>
      <p>Ciclo para recorrer los tipos de Item seleccionados por el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="n">eliminados</span><span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">getlist</span><span class="p">(</span><span class="s1">&#39;eliminados&#39;</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-346'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-346'>#</a>
      </div>
      <p>Agrega del proyecto actual los tipos de Item seleccionados.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">eliminados</span><span class="p">:</span>
            <span class="n">tipo</span> <span class="o">=</span> <span class="n">tipos_enel_proyecto</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">e</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-347'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-347'>#</a>
      </div>
      <p>Se recibe el ID del proyecto en el cual se encuentra actualmente el Usuario
Recupera de la BD el proyecto en el que se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>            <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">tipo</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/gestionProyecto.html&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">,</span> <span class="p">})</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-348'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-348'>#</a>
      </div>
      <p>Recupera de la BD todos los Tipos de Item con los
que cuenta el proyecto en el cual se encuentra el usuario.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="n">proyecto</span> <span class="o">=</span> <span class="n">Proyecto</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">proyectoid</span><span class="p">)</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-349'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-349'>#</a>
      </div>
      <p>Renderiza la pgina cargandola con todos los tipos de Item en el proyecto.</p>
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">tipos_enel_proyecto</span> <span class="o">=</span> <span class="n">proyecto</span><span class="o">.</span><span class="n">tipoItem</span><span class="o">.</span><span class="n">all</span><span class="p">()</span></pre></div>
    </div>
  </div>
  <div class='clearall'></div>
  <div class='section' id='section-350'>
    <div class='docs'>
      <div class='octowrap'>
        <a class='octothorpe' href='#section-350'>#</a>
      </div>
      
    </div>
    <div class='code'>
      <div class="highlight"><pre>    <span class="n">proyectoid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;proyectoid&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;proyecto/removertipo.html&quot;</span><span class="p">,{</span><span class="s1">&#39;tipos&#39;</span><span class="p">:</span><span class="n">tipos_enel_proyecto</span><span class="p">,</span> <span class="s1">&#39;proyectoid&#39;</span><span class="p">:</span> <span class="n">proyectoid</span><span class="p">})</span>

</pre></div>
    </div>
  </div>
  <div class='clearall'></div>
</div>
</body>
